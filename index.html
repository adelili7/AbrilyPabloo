<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Invitación - Abril & Pablo</title>

<!-- Tipografías románticas -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">

<!-- particles.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

<style>
  :root{
    --azul-princesa:#1E3A8A;
    --celeste:#a3c1e5;
    --plateado:#cbd5e1;
    --dorado:#d4af37;
  }
  html,body{height:100%;margin:0;font-family:'Playfair Display',serif;background:linear-gradient(180deg,#dbeeff 0%, #f6fbff 100%);color:#122; -webkit-font-smoothing:antialiased;}
  body {background-image: url('fondo_floral.jpg'); background-size:cover; background-position:center; background-attachment:fixed;}

  /* Partículas ocupan toda la ventana */
  #particles-js{position:fixed; inset:0; z-index:8; pointer-events:none;}

  /* Contenedor del anillo (centro pantalla) */
  .center-screen{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:20;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:18px}
  /* Texto pequeño bajo el anillo */
  .tap-hint{font-family:'Playfair Display'; color:rgba(10,20,40,0.9); font-size:0.95rem; opacity:0.9}

  /* Anillo CSS 3D */
  .ring {
    width:200px;height:200px;border-radius:50%;
    position:relative; display:flex;align-items:center;justify-content:center;
    transform-style:preserve-3d;
    animation:ring-spin 4.5s linear infinite;
    cursor:pointer;
  }

  /* cuerpo del anillo (bisel) */
  .ring .band{
    position:absolute;width:86%;height:86%;border-radius:50%;
    background:linear-gradient(135deg,#e9f6ff 0%, #d7eaff 40%, #f8f6ff 100%);
    border:8px solid rgba(255,255,255,0.9);
    box-shadow: 0 6px 30px rgba(2,20,60,0.25), inset 0 -6px 18px rgba(0,0,0,0.06);
    transform:translateZ(20px);
  }

  /* joya superior (gema) */
  .ring .gem{
    position:absolute; top:12%; left:50%; transform:translateX(-50%);
    width:70px;height:70px;border-radius:18px;
    background: radial-gradient(circle at 30% 20%, #fff 0%, #cfe9ff 20%, #6fb1ff 60%, #4a88d7 100%);
    box-shadow: 0 8px 30px rgba(79,138,214,0.5), 0 0 20px rgba(163,193,229,0.6);
    border:3px solid rgba(255,255,255,0.6);
    transform-origin:center;
    transform-style:preserve-3d;
  }

  /* pequeños brillitos alrededor */
  .sparkle {
    position:absolute; width:8px; height:8px; border-radius:50%;
    background: radial-gradient(circle,#fff,#cfe9ff 40%, rgba(163,193,229,0) 70%);
    filter:drop-shadow(0 0 6px rgba(255,255,255,0.9));
    opacity:0.95;
  }

  /* animaciones de movimiento finas para destellos */
  .sparkle.s1{top:5%; left:25%; animation: floatN 3s ease-in-out infinite;}
  .sparkle.s2{top:10%; left:75%; animation: floatN 3.6s ease-in-out infinite;}
  .sparkle.s3{top:72%; left:18%; animation: floatN 4.2s ease-in-out infinite;}
  .sparkle.s4{top:60%; left:78%; animation: floatN 3.2s ease-in-out infinite;}
  .sparkle.s5{top:38%; left:50%; animation: floatN 5s ease-in-out infinite;}
  @keyframes floatN { 0%{transform:translateY(0) scale(1)}50%{transform:translateY(-10px) scale(0.85)}100%{transform:translateY(0) scale(1)} }

  @keyframes ring-spin {
    0%{transform:rotateX(0deg) rotateY(0deg) rotateZ(0deg)}
    100%{transform:rotateX(360deg) rotateY(360deg) rotateZ(0deg)}
  }

  /* cuando se pausa el anillo (clase .stopped) */
  .ring.stopped{animation-play-state:paused; transition:transform 0.6s ease-out; transform:scale(1.02) rotateX(0deg);}

  /* INVITACIÓN (contenido principal) */
  main.container{position:relative;max-width:1100px;margin:120px auto 60px auto; padding:30px; background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(250,250,255,0.98)); border-radius:18px; box-shadow:0 10px 60px rgba(2,20,60,0.12); z-index:10; display:none;}

  /* pergamino animado */
  .scroll {
    margin: -70px auto 10px auto;
    max-width:760px;
    background: linear-gradient(180deg,#fffaf0,#fff5e1);
    border:4px solid rgba(212,175,55,0.95);
    border-radius:12px;
    padding:26px 30px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.18);
  }
  .title-disney {font-family:'Great Vibes',cursive; font-size:48px; color:var(--azul-princesa); margin:0 0 8px 0; text-shadow:0 3px 0 rgba(0,0,0,0.06); letter-spacing:1px}

  /* sección de encabezado con foto y nombres */
  .hero {display:flex; gap:28px; align-items:center; justify-content:center; flex-wrap:wrap; margin-top:8px;}
  .hero img { width:300px; max-width:85%; border-radius:14px; box-shadow:0 10px 30px rgba(20,40,80,0.22); border:6px solid rgba(255,255,255,0.8); }
  .hero .names {text-align:center;}
  .hero .names h2{font-family:'Great Vibes',cursive;font-size:42px;color:var(--azul-princesa);margin:6px 0;}
  .hero .names p{font-size:18px;color:#345; margin:6px 0;}

  /* Versículo */
  .verse{margin:18px auto;padding:16px;background:linear-gradient(90deg,#e7f2ff,#f2f8ff); border-radius:12px; max-width:760px; color:var(--azul-princesa); font-size:20px; font-family:'Great Vibes',cursive; box-shadow:0 6px 24px rgba(16,52,100,0.06)}

  /* Secciones (mapas, collage, forms) */
  .section{margin:28px 0; padding:18px; border-radius:12px; background:rgba(255,255,255,0.72); box-shadow:0 6px 20px rgba(2,20,60,0.04)}
  .section h3{font-family:'Great Vibes'; color:var(--azul-princesa); font-size:28px; margin:8px 0;}
  .icon-inline{width:28px;vertical-align:middle;margin-right:8px;filter: drop-shadow(0 2px 2px rgba(0,0,0,0.08));}

  /* mapa responsive */
  .map-wrap iframe{width:100%; height:360px; border-radius:12px; border:0; display:block;}

  /* collage fotos */
  .collage {display:grid; grid-template-columns: 1fr 1fr; gap:12px; align-items:center;}
  .collage .big {grid-row:span 2;}
  .collage img{width:100%; border-radius:12px; object-fit:cover; box-shadow:0 8px 26px rgba(2,20,60,0.08)}

  /* sugerir canciones */
  .song-form {display:flex; gap:10px; align-items:center; justify-content:center; flex-wrap:wrap;}
  .song-form input[type="text"]{padding:10px 12px; border-radius:10px; border:1px solid #cbd5e1; min-width:280px;}
  .song-list{margin-top:10px; text-align:left; max-width:700px; margin-left:auto; margin-right:auto; font-size:15px;}

  /* fotos subir (cliente) */
  .upload-row{display:flex; gap:12px; align-items:center; justify-content:center; flex-wrap:wrap;}
  .upload-row input[type="file"]{display:block;}
  .preview-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(140px,1fr)); gap:12px; margin-top:12px;}
  .preview-grid img{width:100%; border-radius:8px; object-fit:cover; height:120px; box-shadow:0 6px 18px rgba(0,0,0,0.08)}

  /* confirmación whatsapp */
  .whatsapp-row{display:flex; gap:14px; justify-content:center; align-items:center; flex-wrap:wrap;margin-top:8px}
  .wa-btn{background:#25D366;color:white;padding:12px 18px;border-radius:10px;text-decoration:none;font-weight:700;box-shadow:0 6px 18px rgba(37,211,102,0.18)}

  /* agradecimiento */
  .message-box textarea{width:86%;min-height:120px;padding:14px;border-radius:12px;border:1px solid #e2e8f0; font-size:15px}

  /* responsive */
  @media (max-width:820px){
    .hero{flex-direction:column}
    .collage{grid-template-columns:1fr; grid-auto-rows:180px}
    .ring{width:150px;height:150px}
  }
</style>
</head>
<body>

<!-- Partículas (fondo mágico) -->
<div id="particles-js"></div>

<!-- Anillo centrado -->
<div class="center-screen" aria-hidden="false">
  <div class="ring" id="ring" title="Toca el anillo para abrir la invitación">
    <div class="band"></div>
    <div class="gem" id="gem"></div>

    <!-- sparkles -->
    <div class="sparkle s1"></div>
    <div class="sparkle s2"></div>
    <div class="sparkle s3"></div>
    <div class="sparkle s4"></div>
    <div class="sparkle s5"></div>
  </div>

  <div class="tap-hint">Toca el anillo para abrir la invitación ✨</div>
</div>

<!-- Contenido principal: INVITACIÓN (oculto hasta click) -->
<main class="container" id="mainInvite" role="main" aria-hidden="true">

  <!-- Pergamino con la frase (aparece primero) -->
  <div class="scroll" id="pergamino" aria-hidden="true">
    <div style="text-align:center;">
      <div class="title-disney">Con Amor Eterno</div>
      <div style="font-size:16px;color:#234; margin-top:8px">Abril Pérez Aguilar & Pablo Eliel Tinoco Hernández</div>
    </div>
  </div>

  <!-- Reproductor y controles -->
  <div style="text-align:center; margin-bottom:6px;">
    <audio id="audioPlayer" preload="auto" src="eternamente.mp3"></audio>
    <button id="playBtn" class="boton-audio" title="Reproducir / Pausar">▶️ Reproducir música</button>
  </div>

  <!-- Hero (foto + nombres) -->
  <section class="section hero" aria-labelledby="heroTitle">
    <img src="foto1.jpg" alt="Abril y Pablo - foto" />
    <div class="names">
      <h2 id="heroTitle">Abril Pérez Aguilar<br><span style="font-size:18px;color:#446">y</span><br>Pablo Eliel Tinoco Hernández</h2>
      <p style="font-size:16px;color:#445">Una historia de amor que comienza su nueva página</p>
    </div>
  </section>

  <!-- Padres -->
  <section class="section" aria-labelledby="parentsTitle">
    <h3 id="parentsTitle">Familias</h3>
    <p style="font-size:16px;color:#234">Hija de <strong>Eva Aguilar Rendón</strong> y <strong>Pedro Pérez Hernández</strong></p>
    <p style="font-size:16px;color:#234">Hijo de <strong>Saray Hernández Santana</strong> y <strong>Pablo Tinoco Carranza (finado)</strong></p>
  </section>

  <!-- Versículo bíblico destacado -->
  <section class="verse" aria-label="versiculo">
    "Y los dos serán una sola carne" — <strong style="font-size:18px">Mateo 19:6</strong>
  </section>

  <!-- Ceremonia -->
  <section class="section" aria-labelledby="ceremonyTitle">
    <h3 id="ceremonyTitle"><img class="icon-inline" src="https://img.icons8.com/ios-filled/50/000000/church.png" alt=""> Ceremonia Religiosa — 2:00 PM</h3>
    <p>Jardín "El Abuelo", Tlaquiltenango (ubicación interactiva abajo)</p>
    <div class="map-wrap">
      <!-- Mapa embed (Bing) - Jardín El Abuelo -->
      <iframe src="https://www.bing.com/maps/embed?h=400&w=800&cp=18.627356~-99.163499&lvl=16&typ=d&sty=r&src=SHELL&FORM=MBEDV8" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>
  </section>

  <!-- Recepción -->
  <section class="section" aria-labelledby="receptionTitle">
    <h3 id="receptionTitle"><img class="icon-inline" src="https://img.icons8.com/ios-filled/50/000000/party-parrot.png" alt=""> Recepción — 4:00 PM</h3>
    <p>Jardín "El Abuelo", Tlaquiltenango (misma ubicación)</p>
    <div class="map-wrap">
      <iframe src="https://www.bing.com/maps/embed?h=400&w=800&cp=18.627356~-99.163499&lvl=16&typ=d&sty=r&src=SHELL&FORM=MBEDV8" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>
  </section>

  <!-- Cuenta regresiva -->
  <section class="section" aria-labelledby="countdownTitle">
    <h3 id="countdownTitle">Cuenta regresiva</h3>
    <div id="countdown" style="font-family:'Great Vibes',cursive;font-size:30px;color:var(--azul-princesa)"></div>
  </section>

  <!-- Nuestros hermosos momentos (collage) -->
  <section class="section" aria-labelledby="momentsTitle">
    <h3 id="momentsTitle">Nuestros hermosos momentos</h3>
    <p style="text-align:center;color:#345">"Tu amor es lo que he anhelado; y el regalo que Dios me ha dado"</p>
    <div class="collage" aria-hidden="false">
      <img src="momento1.jpg" class="big" alt="momento 1">
      <img src="momento2.jpg" alt="momento 2">
      <img src="momento3.jpg" alt="momento 3">
    </div>
  </section>

  <!-- Sugiérenos canciones -->
  <section class="section" aria-labelledby="songsTitle">
    <h3 id="songsTitle">Sugiérenos canciones</h3>
    <div style="text-align:center">
      <img src="momento4.jpg" alt="momento 4" style="width:260px;border-radius:12px;margin-bottom:12px;">
      <div class="song-form">
        <input id="songInput" type="text" placeholder="Escribe la canción y el artista (ej. Eternamente - Tercer Cielo)">
        <button id="songSend" class="boton-audio">Enviar sugerencia</button>
      </div>
      <div class="song-list" id="songList"></div>
    </div>
  </section>

  <!-- Comparte fotografías -->
  <section class="section" aria-labelledby="shareTitle">
    <h3 id="shareTitle">Comparte fotografías del evento</h3>
    <p style="text-align:center">Sube fotos que quieras compartir (vista previa local)</p>
    <div class="upload-row">
      <input id="photoUpload" type="file" accept="image/*" multiple>
    </div>
    <div class="preview-grid" id="previewGrid" aria-live="polite"></div>
  </section>

  <!-- Confirmación (WhatsApp) -->
  <section class="section" aria-labelledby="confirmTitle">
    <h3 id="confirmTitle">Confirma tu asistencia</h3>
    <div class="whatsapp-row">
      <a class="wa-btn" href="https://wa.me/5217774914500" target="_blank" rel="noopener">Abril — +52 1 777 491 4500</a>
      <a class="wa-btn" href="https://wa.me/5217341123645" target="_blank" rel="noopener">Pablo — +52 1 734 112 3645</a>
    </div>
  </section>

  <!-- Gracias y buenos deseos -->
  <section class="section" aria-labelledby="thanksTitle">
    <h3 id="thanksTitle">Gracias por acompañarnos</h3>
    <div class="message-box" style="text-align:center;">
      <textarea id="wishBox" placeholder="Escribe tus buenos deseos aquí..."></textarea>
      <div style="margin-top:10px">
        <button id="sendWish" class="boton-audio">Enviar deseo</button>
      </div>
    </div>
    <div id="wishesList" style="max-width:800px;margin:14px auto;text-align:left"></div>
  </section>

</main>

<script>
/* =========================
   Particles configuration
   ========================= */
particlesJS("particles-js", {
  particles: {
    number: { value: 120, density: { enable: true, value_area: 800 } },
    color: { value: ["#ffffff","#a3c1e5","#FFD700"] },
    shape: { type: "circle" },
    opacity: { value: 0.9, random: true },
    size: { value: 4, random: true },
    line_linked: { enable: false },
    move: { enable: true, speed: 2.5, random: true, out_mode: "out" }
  },
  interactivity: {
    detect_on: "canvas",
    events: { onhover: { enable: true, mode: "repulse" }, onclick: { enable: false } },
    modes: { repulse: { distance: 120 } }
  },
  retina_detect: true
});

/* =========================
   UI: ring click -> open invite
   ========================= */
const ring = document.getElementById('ring');
const mainInvite = document.getElementById('mainInvite');
const pergamino = document.getElementById('pergamino');
const audio = document.getElementById('audioPlayer');
const playBtn = document.getElementById('playBtn');

let opened = false;

function openInvitation(){
  if(opened) return;
  opened = true;

  // stop ring animation with a small scale+tilt
  ring.classList.add('stopped');

  // show pergamino (already in DOM), then show main container
  pergamino.style.display = 'block';
  mainInvite.style.display = 'block';
  mainInvite.setAttribute('aria-hidden','false');

  // scroll the pergamino into view smoothly
  setTimeout(()=> window.scrollTo({ top: document.querySelector('.scroll').offsetTop - 20, behavior: 'smooth' }), 160);

  // start music (click counts as user gesture)
  audio.play().catch(()=>{ /* si el navegador bloquea, el botón play seguirá funcionando */ });

  // change button label
  playBtn.textContent = '⏸ Pausar música';
}
ring.addEventListener('click', openInvitation);

/* play/pause toggle */
playBtn.addEventListener('click', ()=>{
  if(audio.paused){ audio.play(); playBtn.textContent = '⏸ Pausar música'; }
  else { audio.pause(); playBtn.textContent = '▶️ Reproducir música'; }
});

/* when audio ends -> reset button */
audio.addEventListener('ended', ()=> playBtn.textContent = '▶️ Reproducir música');

/* =========================
   Countdown
   ========================= */
const countdownEl = document.getElementById('countdown');
const weddingTime = new Date('December 28, 2025 14:00:00').getTime();
function updateCountdown(){
  const now = Date.now();
  const diff = weddingTime - now;
  if(diff <= 0){ countdownEl.textContent = '¡Hoy es nuestra boda!'; clearInterval(countdownInterval); return; }
  const days = Math.floor(diff / (1000*60*60*24));
  const hours = Math.floor((diff % (1000*60*60*24))/(1000*60*60));
  const minutes = Math.floor((diff % (1000*60*60))/(1000*60));
  const seconds = Math.floor((diff % (1000*60))/1000);
  countdownEl.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
}
updateCountdown();
const countdownInterval = setInterval(updateCountdown,1000);

/* =========================
   Collage / song suggestions / uploads
   ========================= */
const songInput = document.getElementById('songInput');
const songSend = document.getElementById('songSend');
const songList = document.getElementById('songList');
let songs = [];

songSend.addEventListener('click', ()=>{
  const val = songInput.value.trim();
  if(!val) return alert('Escribe la canción y artista.');
  songs.unshift(val);
  songInput.value='';
  renderSongs();
});
function renderSongs(){
  songList.innerHTML = songs.map(s=>`<div style="padding:8px 10px;border-bottom:1px dashed #e6eefc">${s}</div>`).join('');
}

/* upload and preview images client-side */
const photoUpload = document.getElementById('photoUpload');
const previewGrid = document.getElementById('previewGrid');

photoUpload.addEventListener('change', (e)=>{
  const files = Array.from(e.target.files).slice(0,12);
  previewGrid.innerHTML = '';
  files.forEach(file=>{
    if(!file.type.startsWith('image/')) return;
    const reader = new FileReader();
    reader.onload = function(ev){
      const img = document.createElement('img');
      img.src = ev.target.result;
      previewGrid.appendChild(img);
    }
    reader.readAsDataURL(file);
  });
});

/* Messages (buenos deseos) */
const sendWish = document.getElementById('sendWish');
const wishBox = document.getElementById('wishBox');
const wishesList = document.getElementById('wishesList');

sendWish.addEventListener('click', ()=>{
  const text = wishBox.value.trim();
  if(!text) return alert('Escribe tu mensaje antes de enviar.');
  const p = document.createElement('p');
  p.style.padding='8px 12px';
  p.style.background='linear-gradient(90deg,#f8fbff,#eef6ff)';
  p.style.borderRadius='8px';
  p.style.margin='8px 0';
  p.textContent = text;
  wishesList.prepend(p);
  wishBox.value='';
});

/* accesibilidad: permitir abrir con Enter/Space sobre ring */
ring.addEventListener('keydown', (ev)=>{
  if(ev.key==='Enter' || ev.key===' ') openInvitation();
});
ring.tabIndex = 0;
ring.setAttribute('role','button');
ring.setAttribute('aria-label','Abrir invitación - toca el anillo');

/* Optional: hide ring after opening (keeps pergamino visible) */
function hideRingAfterOpen(){
  document.querySelector('.center-screen').style.display = 'none';
}
setTimeout(()=>{
  // listen for first scroll into mainInvite -> hide ring panel
  const observer = new IntersectionObserver((entries)=>{
    if(entries[0] && entries[0].isIntersecting){ hideRingAfterOpen(); observer.disconnect(); }
  },{root:null,threshold:0.1});
  observer.observe(mainInvite);
},600);
</script>

</body>
</html>
 
